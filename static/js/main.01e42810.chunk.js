(this.webpackJsonpprometeus=this.webpackJsonpprometeus||[]).push([[0],{64:function(e,t,n){e.exports=n(79)},79:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(9),i=n.n(o),u=n(11),l=n(43),s=n(123),d=n(8);function m(e){var t=[];return e.forEach((function(e){t.push(e.value?e.value:"undefined")})),t.join("_")}function f(e,t){return{key:"".concat(t?m(t):"undefinedNaturalKey"),type:e,naturalKeysFields:Object.keys(t)}}!function(e){e.STRING="string",e.NUMBER="number",e.PROMETEUS_OBJECT="prometeus_object"}(a||(a={}));var p,b=v(a.NUMBER,[{name:""}]);function v(e,t,n){var a=m(t);return Object(d.a)(Object(d.a)({},f(e,t)),{},{labelKey:n?"".concat(n,"_").concat(a):a})}!function(e){e.DATE="date",e.DATETIME="datetime-local",e.EMAIL="email",e.FILE="file",e.NUMBER="number",e.PASSWORD="password",e.SEARCH="search",e.TEL="tel",e.TEXT="text",e.TIME="time",e.URL="url"}(p||(p={}));var O=n(126);var E,h=function(e){var t=e.errors;return 0!==t.length?"Detected errors: ".concat(t):""};function j(e,t){var n=e.minSize,a=e.maxSize,r=e.regexp,c=[];return t?(function(e,t){return!e||t.length>=e}(n,t)||c.push(E.minSize),function(e,t){return!e||t.length<=e}(a,t)||c.push(E.maxSize),function(e,t){return!e||RegExp(e).test(t)}(r,t)||c.push(E.regexp)):e.isMandatory&&c.push(E.isMandatory),c}!function(e){e.isMandatory="isMandatory",e.minSize="minSize",e.maxSize="maxSize",e.regexp="regexp"}(E||(E={}));var y=function(e){var t=e.field,n=t.constraints,a=Object(r.useState)(t.defaultValue?t.defaultValue:""),o=Object(u.a)(a,2),i=o[0],l=(o[1],Object(r.useState)(j(n,i))),s=Object(u.a)(l,2),d=s[0],m=s[1];return Object(r.useEffect)((function(){m(j(n,i))}),[i]),c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,{label:t.labelKey,error:0!==d.length,required:n.isMandatory,id:"".concat(t.key,"_value"),type:t.inputType?t.inputType:"text",defaultValue:i,onChange:e.onChange?e.onChange:void 0,helperText:h({errors:d})}))},g=n(128),S=n(125),k=n(53),T=n.n(k),x=n(54),M=n.n(x),C=n(72);function w(e,t){return{defaultNom:e||"nom",defaultPrenom:t||"prenom"}}function R(e,t,n,r){var c=w(e,t),o=c.defaultNom,i=c.defaultPrenom;return Object(d.a)(Object(d.a)({},v(a.PROMETEUS_OBJECT,[{name:"nom",value:o},{name:"prenom",value:i}])),{},{nom:N(e),prenom:D(t),age:I(n),email:_(r)})}function N(e){return Object(d.a)(Object(d.a)({},v(a.STRING,[{name:"nom"}],"personne")),{},{inputType:p.TEXT,constraints:{isMandatory:!0,minSize:5},value:e||void 0})}function D(e){return Object(d.a)(Object(d.a)({},v(a.STRING,[{name:"prenom"}],"personne")),{},{inputType:p.TEXT,constraints:{isMandatory:!1,maxSize:15},value:e||void 0})}function I(e){return Object(d.a)(Object(d.a)({},v(a.NUMBER,[{name:"age"}],"personne")),{},{constraints:{isMandatory:!1},value:e||void 0})}function _(e){return Object(d.a)(Object(d.a)({},v(a.STRING,[{name:"email"}],"personne")),{},{inputType:p.EMAIL,constraints:{isMandatory:!1},value:e||void 0})}var z={key:"search",type:a.STRING,naturalKeysFields:["search"],labelKey:"search",inputType:p.SEARCH,constraints:{isMandatory:!1}};var B=function(e){var t=Object(r.useState)(e.headers[0]),n=Object(u.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(!1),l=Object(u.a)(i,2),s=l[0],d=l[1];return c.a.createElement("div",{key:"table_controller",style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end"}},c.a.createElement(S.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:a,onChange:function(t){var n=t.target.value;o(n),e.onItemChanged(n)}},e.headers.map((function(e){return c.a.createElement(g.a,{key:e,value:e},e)}))),c.a.createElement(y,{field:z,onChange:function(t){e.onNewSearch(t.target.value)}}),c.a.createElement("div",{style:{width:"80px",display:"flex",justifyContent:"space-around"}},c.a.createElement(T.a,{onClick:e.onDelete}),c.a.createElement(M.a,{className:"fa fa-plus-circle",onClick:function(){d(!s)}},"add_circle"),s?c.a.createElement("div",{onClick:function(){d(!1),e.onAdd(function(){var e=new C;return R(e.last(),e.first(),e.age(),e.email())}())}},e.formulaireToOpen):void 0))},P=n(119),A=n(120),U=n(121),V=n(129);var G=function(e){var t=Object(r.useState)(e.headers[0]),n=Object(u.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(!0),l=Object(u.a)(i,2),s=l[0],d=l[1];function m(e){var t="asc";return a!==e||s||(t="desc"),t}return c.a.createElement(P.a,null,c.a.createElement(A.a,null,e.headers.map((function(t){return c.a.createElement(U.a,{key:"table_header_".concat(t)},c.a.createElement(V.a,{active:a===t,direction:m(t),onClick:function(){!function(t){a!==t?(d(!0),o(t)):d(!s),e.onSort(a,s)}(t)}}),t)}))))},K=n(122);function J(e){return Object.keys(Object.getOwnPropertyDescriptors(e))}function L(e,t){for(var n=Object.getOwnPropertyDescriptors(e),a=J(t),r=new Map,c=0,o=Object.entries(n);c<o.length;c++){var i=Object(u.a)(o[c],2),l=i[0],s=i[1];-1===a.indexOf(l)&&r.set(l,s)}return r}function F(e,t){for(var n=Object.getOwnPropertyDescriptors(e),a=null,r=0,c=Object.entries(n);r<c.length;r++){var o=Object(u.a)(c[r],2),i=o[0],l=o[1];if(i===t){a=l;break}}return a.value}function W(e){return e?{backgroundColor:"lightgreen"}:{backgroundColor:"lightpink"}}function X(e){return e?{border:"5px solid blue"}:{border:""}}var H=function(e){var t=e.model,n=e.headers;return c.a.createElement(K.a,null,t.map((function(t){var a=t.model,r=t.isValid,o=t.isSelected;return c.a.createElement(A.a,{key:a.key,onClick:function(){e.onSelection(t)},style:Object(d.a)(Object(d.a)({},W(r)),X(o))},function(e,t){var n=L(e,b),a=[];return t.forEach((function(e){n.has(e)&&a.push(n.get(e))})),a}(a,n).map((function(e,t){return e?c.a.createElement(U.a,{key:"".concat(a.key,"_").concat(t)},e.value.value):c.a.createElement(U.a,{key:"".concat(a.key,"_").concat(t)})})))})))};function q(e){var t=function e(t){var n=[];switch(t.type){case a.STRING:n=t.constraints?j(t.constraints,t.value):[];break;case a.NUMBER:break;default:case a.PROMETEUS_OBJECT:L(t,b).forEach((function(t,a){n=n.concat(t?e(t.value):[])}))}return n}(e);return{model:e,isSelected:!1,errors:t,isValid:0===t.length}}var $=function(e){var t=e.model,n=e.headers,a=n||function(e){var t,n=J(e),a=J(b);return t=a,n.filter((function(e){return-1===t.indexOf(e)}))}(t[0]),o=Object(r.useState)(function(e){var t=[];return e.forEach((function(e){t.push(q(e))})),t}(t)),i=Object(u.a)(o,2),d=i[0],m=i[1],f=Object(r.useState)(d),p=Object(u.a)(f,2),v=p[0],O=p[1],E=Object(r.useState)(""),h=Object(u.a)(E,2),j=h[0],y=h[1],g=Object(r.useState)(a[0]),S=Object(u.a)(g,2),k=S[0],T=S[1],x=Object(r.useState)(a[0]),M=Object(u.a)(x,2),C=M[0],w=M[1],R=Object(r.useState)(!0),N=Object(u.a)(R,2),D=N[0],I=N[1];return Object(r.useEffect)((function(){O(function(e,t,n,a,r){var c=[];return e.forEach((function(e){var a=F(e.model,t).value;a&&a.toString().includes(n)&&c.push(e)})),c.sort((function(e,t){var n=F(e.model,a).value,c=F(t.model,a).value;return r?n>c?-1:1:n<c?-1:1})),c}(d,k,j,C,D))}),[j,k,d,C,D]),Object(r.useEffect)((function(){var t=[];d.forEach((function(e){e.isValid||(t=t.concat(e.errors))})),e.setErrors(t),console.log(d)}),[d]),c.a.createElement("div",{style:{border:"3px solid black",padding:"5px"}},c.a.createElement(B,{onNewSearch:y,onItemChanged:T,headers:a,onAdd:function(e){var t=[].concat(Object(l.a)(d),[q(e)]);m(t)},formulaireToOpen:e.formulaireToOpen,onDelete:function(){var e=Object(l.a)(d),t=[];e.forEach((function(e){e.isSelected||t.push(e)})),m(t)}}),c.a.createElement(s.a,null,c.a.createElement(G,{headers:a,onSort:function(e,t){w(e),I(t)}}),c.a.createElement(H,{model:v,headers:a,onSelection:function(e){var t=Object(l.a)(d);t.forEach((function(t){t.model.key===e.model.key&&(t.isSelected=!t.isSelected)})),m(t)}})))},Q=n(124),Y=n(127),Z=(R(),[Object(d.a)({},R("totota","maniol")),Object(d.a)({},R("tatata","manual")),Object(d.a)({},R("titi","manual"))]),ee={key:"rick",name:"Rick",imageDisplay:"/avatars/icons8-rick-sanchez-24.png"},te={key:"vador",name:"Dark Vador",imageDisplay:"/avatars/icons8-dark-vador-24.png",parent:ee},ne={key:"punisher",name:"Punisher",imageDisplay:"/avatars/icons8-punisher-24.png",parent:ee},ae={key:"bender",name:"Bender",imageDisplay:"/avatars/icons8-futurama-bender-24.png",parent:ne};ne=Object(d.a)(Object(d.a)({},ne),{},{childrens:[ae]});ee=Object(d.a)(Object(d.a)({},ee),{},{childrens:[te,ne]});var re=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1];return console.log(Z),c.a.createElement("div",null,c.a.createElement("h1",null,"Prometeus application test"),c.a.createElement(Q.a,{onClick:function(){console.log("Array errors: ",n)}},"Display errors"),c.a.createElement($,{model:Z,setErrors:a,formulaireToOpen:c.a.createElement(Y.a,{src:"/avatars/icons8-rick-sanchez-24.png"})}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.01e42810.chunk.js.map